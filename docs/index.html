<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access to Canadian Census Data Through the 'CensusMapper' API â€¢ cancensus</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">cancensus</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/cancensus.html">Get Started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Making_maps_with_cancensus.html">Making maps with cancensus</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mountainMath/cancensus">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <section class="level1"><div class="page-header"><h1>cancensus: R wrapper for calling CensusMapper APIs</h1></div>

<p>This package provides a wrapper function for CensusMapper API calls from R to query specific census data and geographies for use in R.</p>
<p>The CensusMapper API is still in beta, and the use of the CensusMapper API requires API keys. You can obtain a free API key by <a href="https://censusmapper.ca/users/sign_up">signing up</a> for a CensusMapper account. CensusMapper API keys are free; however, API requests are limited in volume. For larger quotas, please get in touch with Jens <a href="mailto:jens@censusmapper.ca">directly</a>.</p>
<p><strong>Cancensus is currently in early beta and parts of the code may be subject to change.</strong></p>
<section class="level2"><h2>Installing the package</h2>
<pre><code><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">devtools::install_github("mountainmath/cancensus")
library(cancensus)</a></code></pre>
</section><section class="level2"><h2>Get your API key</h2>
<p><strong>cancensus</strong> requires a valid CensusMapper API key to use. To check your API key, just go to "Edit Profile" (in the top-right of the CensusMapper menu bar). Once you have your key, you can store it in your system environment so it is automatically used in API calls. To do so just enter <code>options(cancensus.api_key = "your_api_key")</code>.</p>
</section><section class="level2"><h2>Local Cache</h2>
<p>For performance reasons, and to avoid unneccessarily drawing down API quotas, <strong>cancensus</strong> caches data queries under the hood. By default the cache directory is in the package install directory so that the cache is shared across R projects. The default can be overwritten using <code>options(cancensus.cache_path = 'XXX')</code>, this enables better control over the data. In particular, the defauly cache will be wiped every time <strong>cancensus</strong> gets re-installed, setting a defauly cache directory will avoid that.</p>
</section><section class="level2"><h2>Currently available datasets</h2>
<p><strong>cancensus</strong> can access Statistics Canada Census data for the 2006 Census, the 2011 Census and National Household Survey, as well as the latest available data from the 2016 Census. You can run <code>list_census_datasets</code> to check what datasets are currently available for access through the CensusMapper API. Additional data for the 2016 Census will be included in Censusmapper within a day or two after public release by Statistics Canada. Statistics Canada maintains a release schedule for the Census 2016 Program which can be viewed on their <a href="http://www12.statcan.gc.ca/census-recensement/2016/ref/release-dates-diffusion-eng.cfm">website</a>.</p>
</section><section class="level2"><h2>Picking regions and variables</h2>
<p>Census data contains thousands of different geographic regions as well as thousands of unique variables. There are several useful functions within <strong>cancensus</strong> to simplify accessing Census metadata, locating regions, and identifying variables.</p>
<pre><code><a href="reference/list_census_datasets.html"># To view available Census datasets
list_census_datasets()

# To view available named regions at different levels of Census hierarchy for the 2016 Census (for example)
list_census_regions("CA16")

# To view available Census variables for the 2016 Census
list_census_vectors("CA16")</a></code></pre>
<p>As the number of Census regions and variables is significant, and Census naming patterns are not always the most intuitive, there are a few functions to help users narrow down the data to what they need. These functions will try to catch mispelled search terms and prompt the user with correctly-spelled alternatives.</p>
<pre><code><a href="reference/search_census_regions.html"># To search for regions containing a specific term (e.g. "Victoria") in them in the 2016 Census
search_census_regions("Victoria","CA16")

# To search for variables whose description or label contains a specific term (e.g. "Ojibway")
search_census_vectors("Ojibway","CA16")</a></code></pre>
<p>There is also an interactive tool that is available at <a href="https://censusmapper.ca/api">CensusMapper API call generator</a> to visually select regions and variables and generate code for the API call.</p>
</section><section class="level2"><h2>Getting the data</h2>
<p><strong>cancensus</strong> can return census data with or without associated Census geographical information that can be used for mapping and GIS. By default, <strong>cancensus</strong> returns tidy tabular data only, but has options to return spatial data objects in either <a href="https://github.com/r-spatial/sf"><strong>sf</strong></a> or <a href="https://cran.r-project.org/web/packages/sp/sp.pdf"><strong>sp</strong></a> formats.</p>
<pre><code># Return data only
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"), vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"), level='CSD')

# Return an sf-class data frame
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"), vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"), level='CSD', geo_format = "sf")

# Return a SpatialPolygonsDataFrame
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"), vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"), level='CSD', geo_format = "sp")

# Additional options can viewed in documentation by entering ?get_census() in your R console</code></pre>
<p><strong>cancensus</strong> attempts to minimize bandwidth usage and download time by caching downloads. When attempting to download data that has previously been downloaded, <strong>cancensus</strong> will instead access the locally cached equivalent.</p>
</section><section class="level2"><h2>Analyze and Visualize</h2>
<p><strong>cancensus</strong> generates tidy data that is easy to work with for manipulation, analysis, and visualization.</p>
<pre><code>census_data$sd &lt;- census_data$`v_CA16_409: Single-detached house` / census_data$`v_CA16_408: Occupied private dwellings by structural type of dwelling data` 

# or, equivalently using dplyr
census_data &lt;- census_data %&gt;% 
  mutate(sd = `v_CA16_409: Single-detached house`/`v_CA16_408: Occupied private dwellings by structural type of dwelling data`)

# Visualize:
# devtools::install_github("tidyverse/ggplot2") - development version of ggplot2 which includes geom_sf
library(ggplot2)
ggplot(census_data) +
  geom_sf(aes(fill = sd)) +
  scale_fill_viridis_c("%SD") +
  ggtitle("Proportion of Dwelling Units that are Single Detached") +
  theme_bw()
  
# There are many other ways of visualizing spatial data such as ggmap, tmap, and leaflet for interactive web maps. </code></pre>
</section><section class="level2"><h2>Examples of work using cancensus</h2>
<ul>
<li><a href="https://doodles.mountainmath.ca/blog/2017/09/14/income-a-first-look/">Income: A first look</a></li>
<li><a href="https://www.dshkol.com/2017/language-diversity-in-canada/">Language Diversity in Canada</a></li>
</ul></section><section class="level2"><h2>Version History</h2>
<ul>
<li>0.1.5 - Added pkgdown documentation, new vignettes, and and changes to default messaging</li>
<li>0.1.0 - Added vector and geography discovery capabilities, improved performance, error and API messaging, package dependencies</li>
<li>0.0.1 - First release of <strong>cancensus</strong>
</li>
</ul></section></section>
</div>

  <div class="col-md-3" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/mountainMath/cancensus">https://â€‹github.com/â€‹mountainMath/â€‹cancensus</a>
</li>
<li>Report a bug at <br><a href="https://github.com/mountainMath/cancensus/issues">https://â€‹github.com/â€‹mountainMath/â€‹cancensus/â€‹issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing cancensus</a></li>
</ul>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jens von Bergmann <br><small class="roles"> Author, maintainer </small> </li>
<li>Dmitry Shkolnik <br><small class="roles"> Author </small> </li>
<li>Aaron Jacobs <br><small class="roles"> Author </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=cancensus"><img src="http://www.r-pkg.org/badges/version/cancensus" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jens von Bergmann, Dmitry Shkolnik, Aaron Jacobs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
