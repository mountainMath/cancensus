<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get identifiers for census regions interesecting a geometry — get_intersecting_geometries • cancensus</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Get identifiers for census regions interesecting a geometry — get_intersecting_geometries" />
<meta property="og:description" content="This function returns a list of regions that intersect a given geometry input. This list of regions can be used
directly to query census when one is interested in census data for a particular geographic region that does
not coincide with defined census geometries. The returned value can be used as the regions
parameter in get_census to get corresponding census geographies and variables that cover the give geometry.
Input spatial objects can be any sf or sfc class objects such as POINT, MULTIPOINT or POLYGON.
This function comes with CensusMapper API limits" />
<meta property="og:image" content="https://mountainmath.github.io/cancensus/logo.png" />
<meta property="og:image:alt" content="cancensus" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@vb_jens" />
<meta name="twitter:site" content="https://mountainmath.github.io/cancensus/" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107390160-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107390160-3');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cancensus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/cancensus.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Making_maps_with_cancensus.html">Making maps with cancensus</a>
    </li>
    <li>
      <a href="../articles/data_discovery.html">Data discovery</a>
    </li>
    <li>
      <a href="../articles/Dwellings_by_document_type_cross_tabulation.html">Additional datasets: Structural type of dwelling by document type</a>
    </li>
    <li>
      <a href="../articles/Taxfiler_Data.html">Additional datasets: Annual T1FF taxfiler data</a>
    </li>
    <li>
      <a href="../articles/intersecting_geometries.html">Finding intersecting geometries from custom data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mountainMath/cancensus/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get identifiers for census regions interesecting a geometry</h1>
    <small class="dont-index">Source: <a href='https://github.com/mountainMath/cancensus/blob/master/R/intersect_geometry.R'><code>R/intersect_geometry.R</code></a></small>
    <div class="hidden name"><code>get_intersecting_geometries.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function returns a list of regions that intersect a given geometry input. This list of regions can be used
directly to query census when one is interested in census data for a particular geographic region that does
not coincide with defined census geometries. The returned value can be used as the <code>regions</code>
parameter in <a href='get_census.html'>get_census</a> to get corresponding census geographies and variables that cover the give geometry.
Input spatial objects can be any <code>sf</code> or <code>sfc</code> class objects such as <code>POINT</code>, <code>MULTIPOINT</code> or <code>POLYGON</code>.</p>
<p>This function comes with CensusMapper API limits</p>
    </div>

    <pre class="usage"><span class='fu'>get_intersecting_geometries</span><span class='op'>(</span>
  <span class='va'>dataset</span>,
  <span class='va'>level</span>,
  <span class='va'>geometry</span>,
  simplified <span class='op'>=</span> <span class='cn'>FALSE</span>,
  use_cache <span class='op'>=</span> <span class='cn'>TRUE</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>,
  api_key <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.getenv.html'>Sys.getenv</a></span><span class='op'>(</span><span class='st'>"CM_API_KEY"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataset</th>
      <td><p>A CensusMapper dataset identifier.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>The census aggregation level to retrieve. One of <code>"Regions"</code>, <code>"PR"</code>, <code>"CMA"</code>, <code>"CD"</code>, <code>"CSD"</code>, <code>"CT"</code>, <code>"DA"</code>, <code>"EA"</code> (for 1996 census), or <code>"DB"</code> (for 2001-2016 censuses)..</p></td>
    </tr>
    <tr>
      <th>geometry</th>
      <td><p>An <code>sf</code> or <code>sfc</code> class object</p></td>
    </tr>
    <tr>
      <th>simplified</th>
      <td><p>If <code>TRUE</code> will return a region list compatible with <a href='get_census.html'>get_census</a>, otherwise will return a character vector of matching region ids.</p></td>
    </tr>
    <tr>
      <th>use_cache</th>
      <td><p>If set to <code>TRUE</code> (the default) data will be read from the local cache if available.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>When TRUE, suppress messages and warnings.</p></td>
    </tr>
    <tr>
      <th>api_key</th>
      <td><p>An API key for the CensusMapper API. Defaults to <code><a href='https://rdrr.io/r/base/options.html'>options()</a></code> and then the <code>CM_API_KEY</code> environment variable.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    <p>Census data and boundary geographies are reproduced and distributed on
an "as is" basis with the permission of Statistics Canada (Statistics Canada
1996; 2001; 2006; 2011; 2016).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Example using a POINT-class object from a pair of lat/lon coordinates</span>
<span class='va'>point_geo</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>123.25149</span>, <span class='fl'>49.27026</span><span class='op'>)</span><span class='op'>)</span>, crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span>
<span class='va'>regions</span> <span class='op'>&lt;-</span> <span class='fu'>get_intersecting_geometries</span><span class='op'>(</span>dataset <span class='op'>=</span> <span class='st'>'CA16'</span>, level <span class='op'>=</span> <span class='st'>'CT'</span>, geometry <span class='op'>=</span> <span class='va'>point_geo</span><span class='op'>)</span>
<span class='va'>census_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_census.html'>get_census</a></span><span class='op'>(</span>dataset<span class='op'>=</span><span class='st'>'CA16'</span>, regions<span class='op'>=</span><span class='va'>regions</span>,
                          vectors<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"v_CA16_408"</span>,<span class='st'>"v_CA16_409"</span>,<span class='st'>"v_CA16_410"</span><span class='op'>)</span>,
                          level<span class='op'>=</span><span class='st'>'CT'</span><span class='op'>)</span>

<span class='co'># Example using a POLYGON-class object from a bounding box with four coordinates</span>
<span class='va'>poly_geo</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sfc.html'>st_as_sfc</a></span><span class='op'>(</span><span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_bbox.html'>st_bbox</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='fl'>49.25</span>, ymax <span class='op'>=</span> <span class='fl'>49.30</span>,
                          xmin <span class='op'>=</span> <span class='op'>-</span><span class='fl'>123.25</span>, xmax <span class='op'>=</span> <span class='op'>-</span><span class='fl'>123.30</span><span class='op'>)</span><span class='op'>)</span>, crs <span class='op'>=</span> <span class='fl'>4326</span><span class='op'>)</span>
<span class='va'>regions</span> <span class='op'>&lt;-</span> <span class='fu'>get_intersecting_geometries</span><span class='op'>(</span>dataset <span class='op'>=</span> <span class='st'>'CA16'</span>, level <span class='op'>=</span> <span class='st'>'CT'</span>, geometry <span class='op'>=</span> <span class='va'>poly_geo</span><span class='op'>)</span>
<span class='va'>census_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_census.html'>get_census</a></span><span class='op'>(</span>dataset<span class='op'>=</span><span class='st'>'CA16'</span>, regions<span class='op'>=</span><span class='va'>regions</span>,
                         vectors<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"v_CA16_408"</span>,<span class='st'>"v_CA16_409"</span>,<span class='st'>"v_CA16_410"</span><span class='op'>)</span>, level<span class='op'>=</span><span class='st'>'CT'</span><span class='op'>)</span>

<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://mountainmath.ca'>Jens von Bergmann</a>, <a href='https://dshkol.com'>Dmitry Shkolnik</a>, Aaron Jacobs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


