<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Additional datasets: Structural type of dwelling by document type • cancensus</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Additional datasets: Structural type of dwelling by document type">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107390160-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107390160-3');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cancensus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/cancensus.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Making_maps_with_cancensus.html">Making maps with cancensus</a></li>
    <li><a class="dropdown-item" href="../articles/data_discovery.html">Data discovery</a></li>
    <li><a class="dropdown-item" href="../articles/intersecting_geometries.html">Finding intersecting geometries from custom data</a></li>
    <li><a class="dropdown-item" href="../articles/statcan_attribute_files.html">StatCan attribute files</a></li>
    <li><a class="dropdown-item" href="../articles/statcan_wds.html">StatCan WDS</a></li>
    <li><a class="dropdown-item" href="../articles/Dwellings_by_document_type_cross_tabulation.html">Additional datasets: Structural type of dwelling by document type</a></li>
    <li><a class="dropdown-item" href="../articles/Taxfiler_Data.html">Additional datasets: Annual T1FF taxfiler data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mountainMath/cancensus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Additional datasets: Structural type of dwelling by document type</h1>
            <h3 data-toc-skip class="subtitle">Dataset background and
example usage</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mountainMath/cancensus/blob/HEAD/vignettes/Dwellings_by_document_type_cross_tabulation.Rmd" class="external-link"><code>vignettes/Dwellings_by_document_type_cross_tabulation.Rmd</code></a></small>
      <div class="d-none name"><code>Dwellings_by_document_type_cross_tabulation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Through collaboration with the <a href="https://www.cmhc-schl.gc.ca/" class="external-link">Canadian Mortgage and Housing
Corporation</a> (CMHC), CensusMapper has added and open-sourced a
special cross-tabulation with <em>Structural Type of Dwelling</em> by
<em>Document Type</em> down to the Census Tract level for the census
years 2001, 2006, 2011 and 2016. <em>Structural Type of Dwelling</em> is
a common census variable that describes the type of structure a dwelling
unit is in. <em>Document Type</em> is a less frequently used variable
that classifies whether the census determined the dwelling is
either:</p>
<ul>
<li>occupied by usual residents (also known as a household);</li>
<li>occupied by temporarily present persons; or,</li>
<li>unoccupied.</li>
</ul>
<p>This cross-tabulation has information on the structural type of the
entire building stock, not just the occupied dwelling units. This is
useful when trying to understand the built-up fabric of urban
environments.</p>
<p>As an example, we look at the structure of the dwelling stock in the
City of Toronto in 2016.</p>
</div>
<div class="section level2">
<h2 id="example-usage-buildings-unoccupied-vs-not-occupied-by-usual-residents">Example usage: buildings unoccupied vs not occupied by usual
residents<a class="anchor" aria-label="anchor" href="#example-usage-buildings-unoccupied-vs-not-occupied-by-usual-residents"></a>
</h2>
<p>Dwellings registered as <em>unoccupied</em> on Census day capture the
imagination of many, although people often mistakenly pull data on
dwellings <em>not occupied by usual residents</em> as it is easily
available in the standard Census profile data. The advantage of this
custom cross-tabulation is that it allows researchers to zoom in on
dwellings that were classified as <em>unoccupied</em> by the enumerator
on Census day for additional detail.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Packages used in this example</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mountainMath/cancensus" class="external-link">cancensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>In this example, we want to retrieve the custom structural dwelling
cross-tab for the 2016 Census year with the code <code>CA16xSD</code>
for the Toronto Census subdivision with the standard Statistics Canada
region code <code>3520005</code>. For more background on searching for
Census geographical regions, see <code>?list_census_regions()</code> or
the <a href="https://mountainmath.github.io/cancensus/articles/cancensus.html">Get
started with cancensus vignette</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Attribution for the dataset to be used in graphs</span></span>
<span><span class="va">attribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dataset_attribution.html">dataset_attribution</a></span><span class="op">(</span><span class="st">"CA16xSD"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select all variables base variables, this gives us total counts by structural type of dwelling</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_census_vectors.html">list_census_vectors</a></span><span class="op">(</span><span class="st">"CA16xSD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">parent_vector</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="va">vars</span><span class="op">$</span><span class="va">vector</span>,<span class="va">vars</span><span class="op">$</span><span class="va">label</span><span class="op">)</span></span>
<span></span>
<span><span class="va">variables</span></span>
<span><span class="co">#&gt;                                          Total dwellings </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_1" </span></span>
<span><span class="co">#&gt;                                    Single-detached house </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_2" </span></span>
<span><span class="co">#&gt;                                      Semi-detached house </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_3" </span></span>
<span><span class="co">#&gt;                                                Row house </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_4" </span></span>
<span><span class="co">#&gt;                            Apartment or flat in a duplex </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_5" </span></span>
<span><span class="co">#&gt; Apartment in a building that has fewer than five storeys </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_6" </span></span>
<span><span class="co">#&gt;    Apartment in a building that has five or more storeys </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_7" </span></span>
<span><span class="co">#&gt;                              Other single-attached house </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_8" </span></span>
<span><span class="co">#&gt;                                         Movable dwelling </span></span>
<span><span class="co">#&gt;                                            "v_CA16xSD_9"</span></span></code></pre></div>
<p>The named vector labels the census variables we are about to
query.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Separate out the individual dwelling types</span></span>
<span><span class="va">dwelling_types</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">variables</span><span class="op">)</span>,<span class="st">"Total dwellings"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Grab the census data and compute shares for each dwelling type</span></span>
<span><span class="va">census_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_census.html">get_census</a></span><span class="op">(</span><span class="st">"CA16xSD"</span>,regions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>CSD<span class="op">=</span><span class="st">"3520005"</span><span class="op">)</span>, vectors <span class="op">=</span> <span class="va">variables</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></span><span class="op">(</span><span class="va">dwelling_types</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>share<span class="op">=</span><span class="va">value</span><span class="op">/</span><span class="va">`Total dwellings`</span><span class="op">)</span></span></code></pre></div>
<p>To visualize what this looks like on a bar chart:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">census_data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">name</span>,<span class="va">share</span><span class="op">)</span>,y<span class="op">=</span><span class="va">share</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>,fill<span class="op">=</span><span class="st">"steelblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Toronto dwelling units by structural type"</span>,</span>
<span>       x<span class="op">=</span><span class="cn">NULL</span>,y<span class="op">=</span><span class="cn">NULL</span>,caption<span class="op">=</span><span class="va">attribution</span><span class="op">)</span></span></code></pre></div>
<p><img src="Dwellings_by_document_type_cross_tabulation_files/figure-html/unnamed-chunk-4-1.png" alt="Toronto dwelling units by structural type" width="700"></p>
<p>As with regular Census data, all data can be retrieved as spatial
data. Sometimes it’s easier to use the CensusMapper API interface to
search for and select the variables we are interested in. The
<code><a href="../reference/explore_census_vectors.html">explore_census_vectors()</a></code> function opens a browser with the
variable selection tool, we determine that “v_CA16xSD_1” and
“v_CA16xSD_28” are the variables enumerating all dwellings and all
unoccupied dwellings, respectively.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use explore_census_vectors() to browse and select variables of interest</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Total<span class="op">=</span><span class="st">"v_CA16xSD_1"</span>, Unoccupied<span class="op">=</span><span class="st">"v_CA16xSD_28"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve data with attached geography</span></span>
<span><span class="va">census_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_census.html">get_census</a></span><span class="op">(</span><span class="st">"CA16xSD"</span>,regions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>CSD<span class="op">=</span><span class="st">"3520005"</span><span class="op">)</span>, level<span class="op">=</span><span class="st">"CT"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span>, geo_format <span class="op">=</span> <span class="st">"sf"</span>,</span>
<span>                          vectors <span class="op">=</span> <span class="va">vars</span>,use_cache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>share<span class="op">=</span><span class="va">Unoccupied</span><span class="op">/</span><span class="va">Total</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">census_data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">share</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>datum<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Toronto dwellings unoccupied on census day"</span>,</span>
<span>       fill<span class="op">=</span><span class="st">"Share"</span>,</span>
<span>       x<span class="op">=</span><span class="cn">NULL</span>,y<span class="op">=</span><span class="cn">NULL</span>,caption<span class="op">=</span><span class="va">attribution</span><span class="op">)</span></span></code></pre></div>
<p><img src="Dwellings_by_document_type_cross_tabulation_files/figure-html/unnamed-chunk-5-1.png" alt="Toronto dwellings unoccupied on census day" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://mountainmath.ca" class="external-link">Jens von Bergmann</a>, <a href="https://dshkol.com" class="external-link">Dmitry Shkolnik</a>, Aaron Jacobs.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
