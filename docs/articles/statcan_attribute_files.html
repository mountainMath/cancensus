<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>StatCan attribute files • cancensus</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="StatCan attribute files">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107390160-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107390160-3');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cancensus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/cancensus.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Making_maps_with_cancensus.html">Making maps with cancensus</a></li>
    <li><a class="dropdown-item" href="../articles/data_discovery.html">Data discovery</a></li>
    <li><a class="dropdown-item" href="../articles/intersecting_geometries.html">Finding intersecting geometries from custom data</a></li>
    <li><a class="dropdown-item" href="../articles/statcan_attribute_files.html">StatCan attribute files</a></li>
    <li><a class="dropdown-item" href="../articles/statcan_wds.html">StatCan WDS</a></li>
    <li><a class="dropdown-item" href="../articles/Dwellings_by_document_type_cross_tabulation.html">Additional datasets: Structural type of dwelling by document type</a></li>
    <li><a class="dropdown-item" href="../articles/Taxfiler_Data.html">Additional datasets: Annual T1FF taxfiler data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mountainMath/cancensus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>StatCan attribute files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mountainMath/cancensus/blob/HEAD/vignettes/statcan_attribute_files.Rmd" class="external-link"><code>vignettes/statcan_attribute_files.Rmd</code></a></small>
      <div class="d-none name"><code>statcan_attribute_files.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mountainMath/cancensus" class="external-link">cancensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Attribute files describe the detailed relationship of various
Statistics Canada geographic levels and provide population, household
and dewlling counts. This information can be useful for understanding
the hierarchical relationships of different geographic levels. The <a href="https://censusmapper.ca/api" class="external-link">CensusMapper API</a> that
<strong>cancensus</strong> uses for most of the data queries is
ill-suited to get comprehensive data on the hierarichal relationships
Canada wide, so it can be helpful to have direct access to this data in
comprehensive tabular form.</p>
</div>
<div class="section level2">
<h2 id="match-between-census-tracts-and-census-subdivisions">Match between Census Tracts and Census Subdivisions<a class="anchor" aria-label="anchor" href="#match-between-census-tracts-and-census-subdivisions"></a>
</h2>
<p>If we are interested in understanding which Census Tracts respect
municipal boundaries and which ones don’t in 2021 we can consult the
geographic attributes file. It contains a row for each Census Block, the
basic building block of census geographies, and tags other levels of
geography the Census Block lies in.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">attributes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_statcan_geographic_attributes.html">get_statcan_geographic_attributes</a></span><span class="op">(</span><span class="st">"2021"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">attributes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "PRUID_PRIDU"                   "PRDGUID_PRIDUGD"              </span></span>
<span><span class="co">#&gt;  [3] "PRNAME_PRNOM"                  "PRENAME_PRANOM"               </span></span>
<span><span class="co">#&gt;  [5] "PRFNAME_PRFNOM"                "PREABBR_PRAABBREV"            </span></span>
<span><span class="co">#&gt;  [7] "PRFABBR_PRFABBREV"             "CDUID_DRIDU"                  </span></span>
<span><span class="co">#&gt;  [9] "CDDGUID_DRIDUGD"               "CDNAME_DRNOM"                 </span></span>
<span><span class="co">#&gt; [11] "CDTYPE_DRGENRE"                "FEDUID_CEFIDU"                </span></span>
<span><span class="co">#&gt; [13] "FEDDGUID_CEFIDUGD"             "FEDNAME_CEFNOM"               </span></span>
<span><span class="co">#&gt; [15] "CSDUID_SDRIDU"                 "CSDDGUID_SDRIDUGD"            </span></span>
<span><span class="co">#&gt; [17] "CSDNAME_SDRNOM"                "CSDTYPE_SDRGENRE"             </span></span>
<span><span class="co">#&gt; [19] "DPLUID_LDIDU"                  "DPLDGUID_LDIDUGD"             </span></span>
<span><span class="co">#&gt; [21] "DPLNAME_LDNOM"                 "DPLTYPE_LDGENRE"              </span></span>
<span><span class="co">#&gt; [23] "ERUID_REIDU"                   "ERDGUID_REIDUGD"              </span></span>
<span><span class="co">#&gt; [25] "ERNAME_RENOM"                  "CCSUID_SRUIDU"                </span></span>
<span><span class="co">#&gt; [27] "CCSDGUID_SRUIDUGD"             "CCSNAME_SRUNOM"               </span></span>
<span><span class="co">#&gt; [29] "SACTYPE_CSSGENRE"              "SACCODE_CSSCODE"              </span></span>
<span><span class="co">#&gt; [31] "CMAPUID_RMRPIDU"               "CMAPDGUID_RMRPIDUGD"          </span></span>
<span><span class="co">#&gt; [33] "CMAUID_RMRIDU"                 "CMADGUID_RMRIDUGD"            </span></span>
<span><span class="co">#&gt; [35] "CMANAME_RMRNOM"                "CMATYPE_RMRGENRE"             </span></span>
<span><span class="co">#&gt; [37] "CTUID_SRIDU"                   "CTDGUID_SRIDUGD"              </span></span>
<span><span class="co">#&gt; [39] "CTCODE_SRCODE"                 "CTNAME_SRNOM"                 </span></span>
<span><span class="co">#&gt; [41] "POPCTRRAPUID_CTRPOPRRPIDU"     "POPCTRRAPDGUID_CTRPOPRRPIDUGD"</span></span>
<span><span class="co">#&gt; [43] "POPCTRRAUID_CTRPOPRRIDU"       "POPCTRRADGUID_CTRPOPRRIDUGD"  </span></span>
<span><span class="co">#&gt; [45] "POPCTRRANAME_CTRPOPRRNOM"      "POPCTRRATYPE_CTRPOPRRGENRE"   </span></span>
<span><span class="co">#&gt; [47] "POPCTRRACLASS_CTRPOPRRCLASSE"  "DAUID_ADIDU"                  </span></span>
<span><span class="co">#&gt; [49] "DADGUID_ADIDUGD"               "DARPLAMX_ADLAMX"              </span></span>
<span><span class="co">#&gt; [51] "DARPLAMY_ADLAMY"               "DARPLAT_ADLAT"                </span></span>
<span><span class="co">#&gt; [53] "DARPLONG_ADLONG"               "DBUID_IDIDU"                  </span></span>
<span><span class="co">#&gt; [55] "DBDGUID_IDIDUGD"               "DBPOP2021_IDPOP2021"          </span></span>
<span><span class="co">#&gt; [57] "DBTDWELL2021_IDTLOG2021"       "DBURDWELL2021_IDRHLOG2021"    </span></span>
<span><span class="co">#&gt; [59] "DBAREA2021_IDSUP2021"          "DBIR2021_IDRI2021"            </span></span>
<span><span class="co">#&gt; [61] "ADAUID_ADAIDU"                 "ADADGUID_ADAIDUGD"            </span></span>
<span><span class="co">#&gt; [63] "ADACODE_ADACODE"</span></span></code></pre></div>
<p>To answer our question, we filter Census Block by the ones that lie
within a Census Tract, and check for the collection of Census Blocks
within each Census Tract how many municipalities they lie in.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">attributes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">CMATYPE_RMRGENRE</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>,<span class="st">"K"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># filter areas not in CTs</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">CTCODE_SRCODE</span>,<span class="va">CMATYPE_RMRGENRE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>`Number of municipalities`<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">CSDUID_SDRIDU</span><span class="op">)</span><span class="op">)</span>,.groups<span class="op">=</span><span class="st">"drop"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">`Number of municipalities`</span>,<span class="va">CMATYPE_RMRGENRE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">CMATYPE_RMRGENRE</span>,<span class="va">`Number of municipalities`</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 3</span></span></span>
<span><span class="co">#&gt;   `Number of municipalities` CMATYPE_RMRGENRE     n</span></span>
<span><span class="co">#&gt;                        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                          1 B                 <span style="text-decoration: underline;">5</span>997</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                          2 B                   33</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                          3 B                   13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>                          4 B                    5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>                          6 B                    4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>                          1 K                  194</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>                          2 K                    1</span></span></code></pre></div>
<p>This shows that most census tracts for both Census Metropolitan Areas
(CMATYPE_RMRGENRE=“B”) and tracted Census Agglomerations
(CMATYPE_RMRGENRE=“K”), with some census tracts spanning several
municipalities.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://mountainmath.ca" class="external-link">Jens von Bergmann</a>, <a href="https://dshkol.com" class="external-link">Dmitry Shkolnik</a>, Aaron Jacobs.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
